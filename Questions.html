<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Integrated</title>
<link rel="stylesheet" href="SoftwareEng.css">
  



</head>
<body>

<div class="wrap2">
  <h2 class="title2" id="word" aria-live="polite">
    <span class="ch2">FIND</span>
    <span class="ch2">YOUR</span>
    <span class="ch2">TEACH PATH</span>
    <span class="ch2">IN</span>
    <span class="ch2">MINUTES !</span>
    <span class="spark2" data-spark="center"></span>
  </h2>

  <div class="contain" align="center">
    <div class="box">
      <div id="quiz-container">
          <!-- Q1-->
        <div class="question active">
          1- What type of problem excites you the most?
          <div class="options">
            <label><input type="radio" name="q1" value="1"> Teaching a computer to learn and make predictions</label>
            <label><input type="radio" name="q1" value="2"> Building an app or website that people can use</label>
            <label><input type="radio" name="q1" value="3"> Creating smooth and beautiful interfaces Neutral</label>
            <label><input type="radio" name="q1" value="4"> Finding security flaws before hackers do</label>
            <label><input type="radio" name="q1" value="5"> Discovering hidden insights from big datasets</label>
            <label><input type="radio" name="q1" value="6"> Designing fun and interactive games</label>
            <label><input type="radio" name="q1" value="7"> Deploying systems and making them scalable</label>

          </div>
        </div>
        <!-- Q2-->
          <div class="question">
          2- In a team project, which role feels most, you:        
          <div class="options">
            <label><input type="radio" name="q2" value="8"> Writing the algorithm that makes it smart</label>
            <label><input type="radio" name="q2" value="9"> Building the main functionality of the app</label>
            <label><input type="radio" name="q2" value="10"> Designing how users will interact with it</label>
           <label><input type="radio" name="q2" value="11"> Making sure it’s safe and protected</label>
           <label><input type="radio" name="q2" value="12"> Collecting data and analyzing the results</label>
            <label><input type="radio" name="q2" value="13"> Designing how users will interact with it</label>
            <label><input type="radio" name="q2" value="14"> Designing game mechanics and levels</label>
            <label><input type="radio" name="q2" value="15"> Setting up servers and automating deployment
</label>

          </div>
        </div>

        <!-- Q3-->
        <div class="question">
          3- When you see a new technology, your first thought is:
      
          <div class="options">
            <label><input type="radio" name="q3" value="16"> How can I make this learn by itself?</label>
            <label><input type="radio" name="q3" value="17"> How can I build something useful with this?</label>
            <label><input type="radio" name="q3" value="18"> How can I make it look and feel amazing?</label>
            <label><input type="radio" name="q3" value="19"> How secure is this? Can it be hacked?</label>
            <label><input type="radio" name="q3" value="20"> What data can I gather and analyze from this?</label>
            <label><input type="radio" name="q3" value="21"> Can I make a game with this tech?</label>
             <label><input type="radio" name="q3" value="22"> How do I deploy this in the cloud?</label>


          </div>
        </div>

        <!-- Q4-->
        <div class="question">
          4- Which type of course would you enjoy most:
          <div class="options">
            <label><input type="radio" name="q4" value="23"> Machine Learning and AI</label>
            <label><input type="radio" name="q4" value="24"> Web/App Development</label>
            <label><input type="radio" name="q4" value="25"> UI/UX and Interaction Design</label>
            <label><input type="radio" name="q4" value="26"> Cybersecurity and Ethical Hacking</label>
            <label><input type="radio" name="q4" value="27"> Data Science and Big Data Analytics</label>
            <label><input type="radio" name="q4" value="28"> Game Design and Development</label>
            <label><input type="radio" name="q4" value="29"> Cloud Computing and DevOps</label>
          </div>
        </div>

          <!-- Q5-->
        <div class="question">
          5- Which challenge sounds more fun ?
          <div class="options">
            <label><input type="radio" name="q5" value="30"> Building a chatbot that understands users</label>
            <label><input type="radio" name="q5" value="31"> Creating a to-do list app that everyone likes</label>
            <label><input type="radio" name="q5" value="32"> Designing a smooth checkout flow for an e-commerce app</label>
            <label><input type="radio" name="q5" value="33"> Stopping a simulated cyber-attack</label>
            <label><input type="radio" name="q5" value="34"> Predicting future sales using past data</label>
            <label><input type="radio" name="q5" value="35"> Developing a multiplayer game</label>
            <label><input type="radio" name="q5" value="36"> Automating deployment to multiple servers</label>

          </div>
        </div>

        <!-- Q6-->
        <div class="question">
          6- What type of tools do you like working with?
          <div class="options">
            <label><input type="radio" name="q6" value="37"> Python, ML libraries (TensorFlow, PyTorch)</label>
            <label><input type="radio" name="q6" value="38"> React, Flutter, Node.js</label>
            <label><input type="radio" name="q6" value="39"> Figma, Adobe XD</label>
            <label><input type="radio" name="q6" value="40"> Wireshark, Kali Linux</label>
            <label><input type="radio" name="q6" value="41"> Excel, PowerBI, Jupyter Notebooks</label>
            <label><input type="radio" name="q6" value="42"> Unity, Unreal Engine</label>
            <label><input type="radio" name="q6" value="43"> Docker, Kubernetes, AWS</label>

          </div>
        </div>

        <!-- Q7-->
        <div class="question">
          7- Which subject did you enjoy most?
          <div class="options">
            <label><input type="radio" name="q7" value="44"> Mathematics and Logic</label>
            <label><input type="radio" name="q7" value="45"> Computer Programming</label>
            <label><input type="radio" name="q7" value="46"> Arts and Creative Design</label>
            <label><input type="radio" name="q7" value="47"> Security and Risk</label>
            <label><input type="radio" name="q7" value="48"> Statistics and Analysis</label>
            <label><input type="radio" name="q7" value="49"> Physics and Game Mechanics</label>
            <label><input type="radio" name="q7" value="50"> Networking and Systems</label>
          </div>
        </div>

        <!-- Q8-->
        <div class="question">
          8- Imagine your future job, what excites you more?
          <div class="options">
            <label><input type="radio" name="q8" value="51"> Building AI solutions</label>
            <label><input type="radio" name="q8" value="52"> Developing useful applications</label>
            <label><input type="radio" name="q8" value="53"> Designing experiences people like</label>
            <label><input type="radio" name="q8" value="54"> Protecting systems from attacks</label>
            <label><input type="radio" name="q8" value="55"> Turning data into business decisions</label>
            <label><input type="radio" name="q8" value="56"> Creating entertaining games</label>
            <label><input type="radio" name="q8" value="57"> Managing infrastructure for millions of users</label>
          </div>
        </div>

        <!-- Q9-->
        <div class="question">
          9- Your favorite type of project would be?
          <div class="options">
             <label><input type="radio" name="q9" value="58"> AI-based recommendation system</label>
            <label><input type="radio" name="q9" value="59"> E-commerce website or mobile app</label>
            <label><input type="radio" name="q9" value="60"> UI redesign of a popular app</label>
            <label><input type="radio" name="q9" value="61"> Penetration testing of a company network</label>
            <label><input type="radio" name="q9" value="62"> Data dashboard for decision makers</label>
            <label><input type="radio" name="q9" value="63"> 3D game with interactive levels</label>
            <label><input type="radio" name="q9" value="64"> Scalable cloud service deployment</label>
          </div>
        </div>

          <!-- Q10-->
        <div class="question">
          10- Which statement describes you best?
          <div class="options">
            <label><input type="radio" name="q10" value="65"> “I think logically and love algorithms"</label>
            <label><input type="radio" name="q10" value="66"> “I enjoy building things people can use”</label>
            <label><input type="radio" name="q10" value="67"> “I care about how apps look and feel”</label>
            <label><input type="radio" name="q10" value="68"> “I always think about security and risks”</label>
            <label><input type="radio" name="q10" value="69"> “I like finding patterns in numbers and data”</label>
            <label><input type="radio" name="q10" value="70"> “I enjoy designing and making fun experiences”</label>
            <label><input type="radio" name="q10" value="71"> “I like managing systems and automating processes”</label>

          </div>

          </div>
                  <button id="nextBtn">Next</button>

        </div>

      </div>

    </div>
  </div>

</div>

<script>
// Simple quiz navigation
let current = 0;
const questions = document.querySelectorAll('.question');
questions[0].classList.add('active');

document.getElementById('nextBtn').addEventListener('click', function() {
    const qNum = current + 1;
    const selected = document.querySelector(`input[name="q${qNum}"]:checked`);
    
    if (!selected) {
        alert(`Answer question ${qNum} first`);
        return;
    }
    
    questions[current].classList.remove('active');
    current++;
    
    if (current < questions.length) {
        questions[current].classList.add('active');
        if (current === 9) this.textContent = 'Submit Quiz';
    } else {
        submitQuiz();
    }
});

async function submitQuiz() {
    console.log("SUBMIT QUIZ FUNCTION CALLED");
    
    const answers = [];
    
    // Collect answers
    for (let i = 1; i <= 10; i++) {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        if (selected) {
            answers.push({
                question_id: i,  // MUST be 1-10
                option_id: parseInt(selected.value)  // MUST be 1-71
            });
            console.log(` Q${i}: Selected option ${selected.value}`);
        } else {
            console.log(` Q${i}: NOT ANSWERED!`);
        }
    }
    
    console.log(" Answers array:", answers);
    
    if (answers.length < 10) {
        alert(`You only answered ${answers.length}/10 questions! Please answer all questions.`);
        return;
    }
    
    const token = localStorage.getItem('token');
    console.log(" Token exists?", !!token);
    console.log(" Token:", token ? token.substring(0, 20) + "..." : "NO TOKEN");
    
    if (!token) {
        alert('Session expired. Please login again.');
        window.location.href = 'login.html';
        return;
    }
    
    // Prepare request data
    const requestData = {
        answers: answers
    };
    
    console.log(" Sending to server:", requestData);
    
    try {
        // Show loading
        const btn = document.getElementById('nextBtn');
        btn.textContent = 'Submitting...';
        btn.disabled = true;
        
        console.log(" Making fetch request to: http://localhost:5000/api/quiz/submit");
        
        const response = await fetch('http://localhost:5000/api/quiz/submit', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer ' + token
            },
            body: JSON.stringify(requestData)
        });
        
        console.log(" Response status:", response.status);
        console.log(" Response headers:", response.headers);
        
        const data = await response.json();
        console.log(" Server response data:", data);
        
        if (response.ok && data.success) {
            console.log(" Quiz submitted successfully!");
            console.log(" Career:", data.career);
            console.log(" Roadmap:", data.roadmap);
            
            // Save to localStorage
            localStorage.setItem('current_career', data.career);
            localStorage.setItem('current_roadmap', data.roadmap);
            localStorage.setItem('has_quiz', 'true');
            
            // Redirect
            window.location.href = data.redirect || `Result.html?career=${data.career}`;
        } else {
            console.error(" Server error:", data);
            alert('Error: ' + (data.error || 'Unknown error'));
            
            btn.textContent = 'Submit Quiz';
            btn.disabled = false;
        }
    } catch (error) {
        console.error(" Network error:", error);
        alert('Cannot connect to server. Make sure Flask is running on port 5000!');
        
        document.getElementById('nextBtn').textContent = 'Submit Quiz';
        document.getElementById('nextBtn').disabled = false;
    }
}
</script>

</body>
</html>

