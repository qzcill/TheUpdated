<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Tech Path Result</title>
  <link href="https://fonts.googleapis.com/css2?family=Momo+Trust+Display&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="SoftwareEng.css">
  <style>
    .result-container {
      text-align: center;
      padding: 50px;
      max-width: 800px;
      margin: 0 auto;
    }
    .result-box {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 40px;
      margin: 30px 0;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .roadmap-btn {
      background: linear-gradient(45deg, #6a11cb, #2575fc);
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 18px;
      border-radius: 50px;
      cursor: pointer;
      margin-top: 20px;
      transition: transform 0.3s;
    }
    .roadmap-btn:hover {
      transform: scale(1.05);
    }
    .logout-btn {
      background: #585875;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 10px;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="result-container">
    <h1 class="title"> Your Tech Path Result</h1>
    
    <div class="result-box">
      <h2 id="careerName">Analyzing your answers...</h2>
      <p id="careerDesc"></p>
      
      <button id="viewRoadmap" class="roadmap-btn"> View Your Personalized Roadmap</button>
    </div>
    
    <button onclick="logout()" class="logout-btn">Logout</button>
    
    <p>Your result has been saved. When you login again, you'll go directly to your roadmap!</p>
  </div>

<script>
  // UPDATED Career mapping to match backend AND fix file names
  const careerMap = {
    'AI_ML': {  // Changed to match backend
      name: 'AI / Machine Learning Engineer',
      desc: 'Your logical thinking and algorithm skills are perfect for AI! ü§ñ',
      file: 'AI.html',
      icon: 'ü§ñ'
    },
    'WebDev': {
      name: 'Web & App Developer',
      desc: 'You love building practical solutions! üíª',
      file: 'App_WebDev.html',
      icon: 'üíª'
    },
    'UI_UX': {  // Changed to match backend
      name: 'UI/UX Designer',
      desc: 'You have an eye for beautiful interfaces! üé®',
      file: 'UI_UX.html',
      icon: 'üé®'
    },
    'Cyber': {
      name: 'Cybersecurity Specialist',
      desc: 'You think like a security expert! üõ°Ô∏è',
      file: 'Cyber.html',
      icon: 'üõ°Ô∏è'
    },
    'DataScience': {
      name: 'Data Scientist',
      desc: 'You love finding patterns in data! üìä',
      file: 'Intro.html',  // CHANGED to existing file
      icon: 'üìä'
    },
    'GameDev': {
      name: 'Game Developer',
      desc: 'You are creative and love interactive experiences! üéÆ',
      file: 'GameDev.html',
      icon: 'üéÆ'
    },
    'Cloud_DevOps': {  // Changed to match backend
      name: 'Cloud & DevOps Engineer',
      desc: 'You enjoy automation and scalability! ‚òÅÔ∏è',
      file: 'CloudComputing_DevOps.html',
      icon: '‚òÅÔ∏è'
    }
  };

  function loadResult() {
    const urlParams = new URLSearchParams(window.location.search);
    let career = urlParams.get('career') || localStorage.getItem('current_career') || 'WebDev';
    
    console.log("Career received:", career); // DEBUG
    
    // Convert old career names to new format
    const nameConverter = {
      'AI': 'AI_ML',
      'UIUX': 'UI_UX',
      'Cloud': 'Cloud_DevOps'
    };
    
    if (nameConverter[career]) {
      console.log("Converting:", career, "‚Üí", nameConverter[career]);
      career = nameConverter[career];
    }
    
    const info = careerMap[career] || careerMap['WebDev'];
    
    console.log("Displaying career:", info.name);
    console.log("Roadmap file:", info.file);
    
    // Display result
    document.getElementById('careerName').textContent = `${info.icon} ${info.name}`;
    document.getElementById('careerDesc').textContent = info.desc;
    
    // Save to localStorage
    localStorage.setItem('current_career', career);
    localStorage.setItem('current_roadmap', info.file);
    localStorage.setItem('has_quiz', 'true');
    
    // ========== CRITICAL: Add button click handler ==========
    document.getElementById('viewRoadmap').addEventListener('click', function() {
      console.log("Button clicked! Going to:", info.file);
      window.location.href = info.file;
    });
  }
  
  function logout() {
    localStorage.clear();
    window.location.href = 'login.html';
  }
  
  // Load result when page loads
  document.addEventListener('DOMContentLoaded', loadResult);
</script>
</body>
</html>
